<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <!-- Include previous version -->
    <include file="db.changelog-master-1.1.3.xml" relativeToChangelogFile="true"/>

    <!-- Create KPI B.3 result table -->
    <include file="1.1.4/ddl/20250924120000_added_entity_KpiB3Result.xml" relativeToChangelogFile="true"/>

    <!-- Create KPI B.3 detail result table -->
    <include file="1.1.4/ddl/20250925120000_added_entity_KpiB3DetailResult.xml" relativeToChangelogFile="true"/>

    <!-- Create KPI B.3 analytic data table -->
    <include file="1.1.4/ddl/20250925120001_added_entity_KpiB3AnalyticData.xml" relativeToChangelogFile="true"/>

    <!-- Add constraints for KPI B.3 detail result table -->
    <include file="1.1.4/ddl/20250925120002_added_entity_constraints_KpiB3DetailResult.xml" relativeToChangelogFile="true"/>

    <!-- Add constraints for KPI B.3 analytic data table -->
    <include file="1.1.4/ddl/20250925120003_added_entity_constraints_KpiB3AnalyticData.xml" relativeToChangelogFile="true"/>

    <!-- Create PagoPA Stand-In data aggregation table -->
    <include file="1.1.4/ddl/20250926120000_added_entity_PagopaNumeroStandin.xml" relativeToChangelogFile="true"/>

    <!-- Update module B.3 configuration for automatic KPI calculation -->
    <include file="1.1.4/dml/20250923150000_update_module_b3_configuration.xml" relativeToChangelogFile="true"/>

    <!-- Add KPI B.3 authorizations -->
    <include file="1.1.4/dml/20251001174300_add_kpi_b3_authorizations.xml" relativeToChangelogFile="true"/>

    <!-- Create KPI B.3 drilldown table for historical data snapshots -->
    <include file="1.1.4/ddl/20250116120000_added_entity_PagopaNumeroStandinDrilldown.xml" relativeToChangelogFile="true"/>

    <!-- Add constraints for KPI B.3 drilldown table -->
    <include file="1.1.4/ddl/20250116120001_added_entity_constraints_PagopaNumeroStandinDrilldown.xml" relativeToChangelogFile="true"/>
    
     <!-- Remove anag_station column from KPI B.3 detail result table -->
  	<include file="1.1.4/ddl/20251009120500_fix_kpib3_detail_result_anag_station_nullable.xml" relativeToChangelogFile="true"/>

    <!-- Rename table PAGOPA_NUMERO_STANDIN to STANDIN_NUMBER -->
    <include file="1.1.4/ddl/20251009150000_rename_pagopa_numero_standin_table.xml" relativeToChangelogFile="true"/>

    <!-- Rename table PAGOPA_NUMERO_STANDIN_DRILLDOWN to STANDIN_NUMBER_DRILLDOWN -->
    <include file="1.1.4/ddl/20251010150000_rename_pagopa_numero_standin_drilldown_table.xml" relativeToChangelogFile="true"/>

</databaseChangeLog>